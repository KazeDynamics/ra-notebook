import{H as Ie,a1 as ge}from"../chunks/index.12c65bb6.js";import{S as Me,a as Fe,I as N,g as Te,f as je,b as ye,d as le,s as M,i as we,e as Q,P as De,h as Be}from"../chunks/singletons.252098fa.js";import{b as K}from"../chunks/paths.dc5961b8.js";import{u as Ge}from"../chunks/parse.492575b6.js";function We(n,o){return n==="/"||o==="ignore"?n:o==="never"?n.endsWith("/")?n.slice(0,-1):n:o==="always"&&!n.endsWith("/")?n+"/":n}function Ye(n){return n.split("%25").map(decodeURI).join("%25")}function Xe(n){for(const o in n)n[o]=decodeURIComponent(n[o]);return n}const Qe=["href","pathname","search","searchParams","toString","toJSON"];function Ze(n,o){const c=new URL(n);for(const i of Qe)Object.defineProperty(c,i,{get(){return o(),n[i]},enumerable:!0,configurable:!0});return et(c),c}function et(n){Object.defineProperty(n,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const tt="/__data.json";function nt(n){return n.replace(/\/$/,"")+tt}function Je(n){try{return JSON.parse(sessionStorage[n])}catch{}}function Ne(n,o){const c=JSON.stringify(o);try{sessionStorage[n]=c}catch{}}function at(...n){let o=5381;for(const c of n)if(typeof c=="string"){let i=c.length;for(;i;)o=o*33^c.charCodeAt(--i)}else if(ArrayBuffer.isView(c)){const i=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);let _=i.length;for(;_;)o=o*33^i[--_]}else throw new TypeError("value must be a string or TypedArray");return(o>>>0).toString(36)}const fe=window.fetch;window.fetch=(n,o)=>((n instanceof Request?n.method:o?.method||"GET")!=="GET"&&ee.delete(Ee(n)),fe(n,o));const ee=new Map;function rt(n,o){const c=Ee(n,o),i=document.querySelector(c);if(i?.textContent){const{body:_,...h}=JSON.parse(i.textContent),b=i.getAttribute("data-ttl");return b&&ee.set(c,{body:_,init:h,ttl:1e3*Number(b)}),Promise.resolve(new Response(_,h))}return fe(n,o)}function ot(n,o,c){if(ee.size>0){const i=Ee(n,c),_=ee.get(i);if(_){if(performance.now()<_.ttl&&["default","force-cache","only-if-cached",void 0].includes(c?.cache))return new Response(_.body,_.init);ee.delete(i)}}return fe(o,c)}function Ee(n,o){let i=`script[data-sveltekit-fetched][data-url=${JSON.stringify(n instanceof Request?n.url:n)}]`;if(o?.headers||o?.body){const _=[];o.headers&&_.push([...new Headers(o.headers)].join(",")),o.body&&(typeof o.body=="string"||ArrayBuffer.isView(o.body))&&_.push(o.body),i+=`[data-hash="${at(..._)}"]`}return i}const st=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function it(n){const o=[];return{pattern:n==="/"?/^\/$/:new RegExp(`^${lt(n).map(i=>{const _=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(i);if(_)return o.push({name:_[1],matcher:_[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const h=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(i);if(h)return o.push({name:h[1],matcher:h[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!i)return;const b=i.split(/\[(.+?)\](?!\])/);return"/"+b.map((S,v)=>{if(v%2){if(S.startsWith("x+"))return ve(String.fromCharCode(parseInt(S.slice(2),16)));if(S.startsWith("u+"))return ve(String.fromCharCode(...S.slice(2).split("-").map(j=>parseInt(j,16))));const p=st.exec(S);if(!p)throw new Error(`Invalid param: ${S}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,I,U,k,L]=p;return o.push({name:k,matcher:L,optional:!!I,rest:!!U,chained:U?v===1&&b[0]==="":!1}),U?"(.*?)":I?"([^/]*)?":"([^/]+?)"}return ve(S)}).join("")}).join("")}/?$`),params:o}}function ct(n){return!/^\([^)]+\)$/.test(n)}function lt(n){return n.slice(1).split("/").filter(ct)}function ft(n,o,c){const i={},_=n.slice(1);let h=0;for(let b=0;b<o.length;b+=1){const g=o[b],S=_[b-h];if(g.chained&&g.rest&&h){i[g.name]=_.slice(b-h,b+1).filter(v=>v).join("/"),h=0;continue}if(S===void 0){g.rest&&(i[g.name]="");continue}if(!g.matcher||c[g.matcher](S)){i[g.name]=S;const v=o[b+1],p=_[b+1];v&&!v.rest&&v.optional&&p&&(h=0);continue}if(g.optional&&g.chained){h++;continue}return}if(!h)return i}function ve(n){return n.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function ut({nodes:n,server_loads:o,dictionary:c,matchers:i}){const _=new Set(o);return Object.entries(c).map(([g,[S,v,p]])=>{const{pattern:I,params:U}=it(g),k={id:g,exec:L=>{const j=I.exec(L);if(j)return ft(j,U,i)},errors:[1,...p||[]].map(L=>n[L]),layouts:[0,...v||[]].map(b),leaf:h(S)};return k.errors.length=k.layouts.length=Math.max(k.errors.length,k.layouts.length),k});function h(g){const S=g<0;return S&&(g=~g),[S,n[g]]}function b(g){return g===void 0?g:[_.has(g),n[g]]}}let Z=class{constructor(o,c){this.status=o,typeof c=="string"?this.body={message:c}:c?this.body=c:this.body={message:`Error: ${o}`}}toString(){return JSON.stringify(this.body)}},qe=class{constructor(o,c){this.status=o,this.location=c}};async function dt(n){for(const o in n)if(typeof n[o]?.then=="function")return Object.fromEntries(await Promise.all(Object.entries(n).map(async([c,i])=>[c,await i])));return n}const Ke=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...Ke];const pt=new Set([...Ke,"actions"]);[...pt];function ht(n){return n.filter(o=>o!=null)}const mt="x-sveltekit-invalidated",V=Je(Me)??{},X=Je(Fe)??{};function be(n){V[n]=Q()}function _t(n,o){const c=ut(n),i=n.nodes[0],_=n.nodes[1];i(),_();const h=document.documentElement,b=[],g=[];let S=null;const v={before_navigate:[],after_navigate:[]};let p={branch:[],error:null,url:null},I=!1,U=!1,k=!0,L=!1,j=!1,F=!1,J=!1,z,A=history.state?.[N];A||(A=Date.now(),history.replaceState({...history.state,[N]:A},"",location.href));const ue=V[A];ue&&(history.scrollRestoration="manual",scrollTo(ue.x,ue.y));let H,te,ne;async function Re(){ne=ne||Promise.resolve(),await ne,ne=null;const e=new URL(location.href),a=W(e,!0);S=null;const t=te={},r=a&&await he(a);if(t===te&&r){if(r.type==="redirect")return ae(new URL(r.location,e).href,{},[e.pathname],t);r.props.page!==void 0&&(H=r.props.page),z.$set(r.props)}}function xe(e){g.some(a=>a?.snapshot)&&(X[e]=g.map(a=>a?.snapshot?.capture()))}function ke(e){X[e]?.forEach((a,t)=>{g[t]?.snapshot?.restore(a)})}function Le(){be(A),Ne(Me,V),xe(A),Ne(Fe,X)}async function ae(e,{noScroll:a=!1,replaceState:t=!1,keepFocus:r=!1,state:s={},invalidateAll:l=!1},u,y){return typeof e=="string"&&(e=new URL(e,Te(document))),ie({url:e,scroll:a?Q():null,keepfocus:r,redirect_chain:u,details:{state:s,replaceState:t},nav_token:y,accepted:()=>{l&&(J=!0)},blocked:()=>{},type:"goto"})}async function Ae(e){return S={id:e.id,promise:he(e).then(a=>(a.type==="loaded"&&a.state.error&&(S=null),a))},S.promise}async function re(...e){const t=c.filter(r=>e.some(s=>r.exec(s))).map(r=>Promise.all([...r.layouts,r.leaf].map(s=>s?.[1]())));await Promise.all(t)}function Pe(e){p=e.state;const a=document.querySelector("style[data-sveltekit]");a&&a.remove(),H=e.props.page,z=new n.root({target:o,props:{...e.props,stores:M,components:g},hydrate:!0}),ke(A);const t={from:null,to:{params:p.params,route:{id:p.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter"};v.after_navigate.forEach(r=>r(t)),U=!0}async function G({url:e,params:a,branch:t,status:r,error:s,route:l,form:u}){let y="never";for(const f of t)f?.slash!==void 0&&(y=f.slash);e.pathname=We(e.pathname,y),e.search=e.search;const w={type:"loaded",state:{url:e,params:a,branch:t,error:s,route:l},props:{constructors:ht(t).map(f=>f.node.component)}};u!==void 0&&(w.props.form=u);let m={},x=!H,d=0;for(let f=0;f<Math.max(t.length,p.branch.length);f+=1){const P=t[f],q=p.branch[f];P?.data!==q?.data&&(x=!0),P&&(m={...m,...P.data},x&&(w.props[`data_${d}`]=m),d+=1)}return(!p.url||e.href!==p.url.href||p.error!==s||u!==void 0&&u!==H.form||x)&&(w.props.page={error:s,params:a,route:{id:l?.id??null},status:r,url:new URL(e),form:u??null,data:x?m:H.data}),w}async function de({loader:e,parent:a,url:t,params:r,route:s,server_data_node:l}){let u=null;const y={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},w=await e();if(w.universal?.load){let m=function(...d){for(const E of d){const{href:f}=new URL(E,t);y.dependencies.add(f)}};const x={route:{get id(){return y.route=!0,s.id}},params:new Proxy(r,{get:(d,E)=>(y.params.add(E),d[E])}),data:l?.data??null,url:Ze(t,()=>{y.url=!0}),async fetch(d,E){let f;d instanceof Request?(f=d.url,E={body:d.method==="GET"||d.method==="HEAD"?void 0:await d.blob(),cache:d.cache,credentials:d.credentials,headers:d.headers,integrity:d.integrity,keepalive:d.keepalive,method:d.method,mode:d.mode,redirect:d.redirect,referrer:d.referrer,referrerPolicy:d.referrerPolicy,signal:d.signal,...E}):f=d;const P=new URL(f,t);return m(P.href),P.origin===t.origin&&(f=P.href.slice(t.origin.length)),U?ot(f,P.href,E):rt(f,E)},setHeaders:()=>{},depends:m,parent(){return y.parent=!0,a()}};u=await w.universal.load.call(null,x)??null,u=u?await dt(u):null}return{node:w,loader:e,server:l,universal:w.universal?.load?{type:"data",data:u,uses:y}:null,data:u??l?.data??null,slash:w.universal?.trailingSlash??l?.slash}}function Ue(e,a,t,r,s){if(J)return!0;if(!r)return!1;if(r.parent&&e||r.route&&a||r.url&&t)return!0;for(const l of r.params)if(s[l]!==p.params[l])return!0;for(const l of r.dependencies)if(b.some(u=>u(new URL(l))))return!0;return!1}function pe(e,a){return e?.type==="data"?e:e?.type==="skip"?a??null:null}async function he({id:e,invalidating:a,url:t,params:r,route:s}){if(S?.id===e)return S.promise;const{errors:l,layouts:u,leaf:y}=s,w=[...u,y];l.forEach(R=>R?.().catch(()=>{})),w.forEach(R=>R?.[1]().catch(()=>{}));let m=null;const x=p.url?e!==p.url.pathname+p.url.search:!1,d=p.route?s.id!==p.route.id:!1;let E=!1;const f=w.map((R,$)=>{const T=p.branch[$],C=!!R?.[0]&&(T?.loader!==R[1]||Ue(E,d,x,T.server?.uses,r));return C&&(E=!0),C});if(f.some(Boolean)){try{m=await He(t,f)}catch(R){return oe({status:R instanceof Z?R.status:500,error:await Y(R,{url:t,params:r,route:{id:s.id}}),url:t,route:s})}if(m.type==="redirect")return m}const P=m?.nodes;let q=!1;const O=w.map(async(R,$)=>{if(!R)return;const T=p.branch[$],C=P?.[$];if((!C||C.type==="skip")&&R[1]===T?.loader&&!Ue(q,d,x,T.universal?.uses,r))return T;if(q=!0,C?.type==="error")throw C;return de({loader:R[1],url:t,params:r,route:s,parent:async()=>{const me={};for(let _e=0;_e<$;_e+=1)Object.assign(me,(await O[_e])?.data);return me},server_data_node:pe(C===void 0&&R[0]?{type:"skip"}:C??null,R[0]?T?.server:void 0)})});for(const R of O)R.catch(()=>{});const D=[];for(let R=0;R<w.length;R+=1)if(w[R])try{D.push(await O[R])}catch($){if($ instanceof qe)return{type:"redirect",location:$.location};let T=500,C;if(P?.includes($))T=$.status??T,C=$.error;else if($ instanceof Z)T=$.status,C=$.body;else{if(await M.updated.check())return await B(t);C=await Y($,{params:r,url:t,route:{id:s.id}})}const ce=await Oe(R,D,l);return ce?await G({url:t,params:r,branch:D.slice(0,ce.idx).concat(ce.node),status:T,error:C,route:s}):await Ce(t,{id:s.id},C,T)}else D.push(void 0);return await G({url:t,params:r,branch:D,status:200,error:null,route:s,form:a?void 0:null})}async function Oe(e,a,t){for(;e--;)if(t[e]){let r=e;for(;!a[r];)r-=1;try{return{idx:r+1,node:{node:await t[e](),loader:t[e],data:{},server:null,universal:null}}}catch{continue}}}async function oe({status:e,error:a,url:t,route:r}){const s={};let l=null;if(n.server_loads[0]===0)try{const m=await He(t,[!0]);if(m.type!=="data"||m.nodes[0]&&m.nodes[0].type!=="data")throw 0;l=m.nodes[0]??null}catch{(t.origin!==location.origin||t.pathname!==location.pathname||I)&&await B(t)}const y=await de({loader:i,url:t,params:s,route:r,parent:()=>Promise.resolve({}),server_data_node:pe(l)}),w={node:await _(),loader:_,universal:null,server:null,data:null};return await G({url:t,params:s,branch:[y,w],status:e,error:a,route:null})}function W(e,a){if(we(e,K))return;const t=se(e);for(const r of c){const s=r.exec(t);if(s)return{id:e.pathname+e.search,invalidating:a,route:r,params:Xe(s),url:e}}}function se(e){return Ye(e.pathname.slice(K.length)||"/")}function $e({url:e,type:a,intent:t,delta:r}){let s=!1;const l={from:{params:p.params,route:{id:p.route?.id??null},url:p.url},to:{params:t?.params??null,route:{id:t?.route?.id??null},url:e},willUnload:!t,type:a};r!==void 0&&(l.delta=r);const u={...l,cancel:()=>{s=!0}};return j||v.before_navigate.forEach(y=>y(u)),s?null:l}async function ie({url:e,scroll:a,keepfocus:t,redirect_chain:r,details:s,type:l,delta:u,nav_token:y={},accepted:w,blocked:m}){const x=W(e,!1),d=$e({url:e,type:l,delta:u,intent:x});if(!d){m();return}const E=A;w(),j=!0,U&&M.navigating.set(d),te=y;let f=x&&await he(x);if(!f){if(we(e,K))return await B(e);f=await Ce(e,{id:null},await Y(new Error(`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=x?.url||e,te!==y)return!1;if(f.type==="redirect")if(r.length>10||r.includes(e.pathname))f=await oe({status:500,error:await Y(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return ae(new URL(f.location,e).href,{},[...r,e.pathname],y),!1;else f.props.page?.status>=400&&await M.updated.check()&&await B(e);if(b.length=0,J=!1,L=!0,be(E),xe(E),f.props.page?.url&&f.props.page.url.pathname!==e.pathname&&(e.pathname=f.props.page?.url.pathname),s){const O=s.replaceState?0:1;if(s.state[N]=A+=O,history[s.replaceState?"replaceState":"pushState"](s.state,"",e),!s.replaceState){let D=A+1;for(;X[D]||V[D];)delete X[D],delete V[D],D+=1}}S=null,U?(p=f.state,f.props.page&&(f.props.page.url=e),z.$set(f.props)):Pe(f);const{activeElement:P}=document;if(await ge(),k){const O=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));a?scrollTo(a.x,a.y):O?O.scrollIntoView():scrollTo(0,0)}const q=document.activeElement!==P&&document.activeElement!==document.body;!t&&!q&&Se(),k=!0,f.props.page&&(H=f.props.page),j=!1,l==="popstate"&&ke(A),v.after_navigate.forEach(O=>O(d)),M.navigating.set(null),L=!1}async function Ce(e,a,t,r){return e.origin===location.origin&&e.pathname===location.pathname&&!I?await oe({status:r,error:t,url:e,route:a}):await B(e)}function B(e){return location.href=e.href,new Promise(()=>{})}function ze(){let e;h.addEventListener("mousemove",l=>{const u=l.target;clearTimeout(e),e=setTimeout(()=>{r(u,2)},20)});function a(l){r(l.composedPath()[0],1)}h.addEventListener("mousedown",a),h.addEventListener("touchstart",a,{passive:!0});const t=new IntersectionObserver(l=>{for(const u of l)u.isIntersecting&&(re(se(new URL(u.target.href))),t.unobserve(u.target))},{threshold:0});function r(l,u){const y=je(l,h);if(!y)return;const{url:w,external:m,download:x}=ye(y,K);if(m||x)return;const d=le(y);if(!d.reload)if(u<=d.preload_data){const E=W(w,!1);E&&Ae(E)}else u<=d.preload_code&&re(se(w))}function s(){t.disconnect();for(const l of h.querySelectorAll("a")){const{url:u,external:y,download:w}=ye(l,K);if(y||w)continue;const m=le(l);m.reload||(m.preload_code===De.viewport&&t.observe(l),m.preload_code===De.eager&&re(se(u)))}}v.after_navigate.push(s),s()}function Y(e,a){return e instanceof Z?e.body:n.hooks.handleError({error:e,event:a})??{message:a.route.id!=null?"Internal Error":"Not Found"}}return{after_navigate:e=>{Ie(()=>(v.after_navigate.push(e),()=>{const a=v.after_navigate.indexOf(e);v.after_navigate.splice(a,1)}))},before_navigate:e=>{Ie(()=>(v.before_navigate.push(e),()=>{const a=v.before_navigate.indexOf(e);v.before_navigate.splice(a,1)}))},disable_scroll_handling:()=>{(L||!U)&&(k=!1)},goto:(e,a={})=>ae(e,a,[]),invalidate:e=>{if(typeof e=="function")b.push(e);else{const{href:a}=new URL(e,location.href);b.push(t=>t.href===a)}return Re()},invalidate_all:()=>(J=!0,Re()),preload_data:async e=>{const a=new URL(e,Te(document)),t=W(a,!1);if(!t)throw new Error(`Attempted to preload a URL that does not belong to this app: ${a}`);await Ae(t)},preload_code:re,apply_action:async e=>{if(e.type==="error"){const a=new URL(location.href),{branch:t,route:r}=p;if(!r)return;const s=await Oe(p.branch.length,t,r.errors);if(s){const l=await G({url:a,params:p.params,branch:t.slice(0,s.idx).concat(s.node),status:e.status??500,error:e.error,route:r});p=l.state,z.$set(l.props),ge().then(Se)}}else e.type==="redirect"?ae(e.location,{invalidateAll:!0},[]):(z.$set({form:null,page:{...H,form:e.data,status:e.status}}),await ge(),z.$set({form:e.data}),e.type==="success"&&Se())},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",e=>{let a=!1;if(Le(),!j){const t={from:{params:p.params,route:{id:p.route?.id??null},url:p.url},to:null,willUnload:!0,type:"leave",cancel:()=>a=!0};v.before_navigate.forEach(r=>r(t))}a?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Le()}),navigator.connection?.saveData||ze(),h.addEventListener("click",e=>{if(e.button||e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.defaultPrevented)return;const a=je(e.composedPath()[0],h);if(!a)return;const{url:t,external:r,target:s,download:l}=ye(a,K);if(!t)return;if(s==="_parent"||s==="_top"){if(window.parent!==window)return}else if(s&&s!=="_self")return;const u=le(a);if(!(a instanceof SVGAElement)&&t.protocol!==location.protocol&&!(t.protocol==="https:"||t.protocol==="http:")||l)return;if(r||u.reload){$e({url:t,type:"link"})?j=!0:e.preventDefault();return}const[w,m]=t.href.split("#");if(m!==void 0&&w===location.href.split("#")[0]){if(F=!0,be(A),p.url=t,M.page.set({...H,url:t}),M.page.notify(),!u.replace_state)return;F=!1,e.preventDefault()}ie({url:t,scroll:u.noscroll?Q():null,keepfocus:u.keep_focus??!1,redirect_chain:[],details:{state:{},replaceState:u.replace_state??t.href===location.href},accepted:()=>e.preventDefault(),blocked:()=>e.preventDefault(),type:"link"})}),h.addEventListener("submit",e=>{if(e.defaultPrevented)return;const a=HTMLFormElement.prototype.cloneNode.call(e.target),t=e.submitter;if((t?.formMethod||a.method)!=="get")return;const s=new URL(t?.hasAttribute("formaction")&&t?.formAction||a.action);if(we(s,K))return;const l=e.target,{keep_focus:u,noscroll:y,reload:w,replace_state:m}=le(l);if(w)return;e.preventDefault(),e.stopPropagation();const x=new FormData(l),d=t?.getAttribute("name");d&&x.append(d,t?.getAttribute("value")??""),s.search=new URLSearchParams(x).toString(),ie({url:s,scroll:y?Q():null,keepfocus:u??!1,redirect_chain:[],details:{state:{},replaceState:m??s.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",async e=>{if(e.state?.[N]){if(e.state[N]===A)return;const a=V[e.state[N]];if(p.url.href.split("#")[0]===location.href.split("#")[0]){V[A]=Q(),A=e.state[N],scrollTo(a.x,a.y);return}const t=e.state[N]-A;await ie({url:new URL(location.href),scroll:a,keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{A=e.state[N]},blocked:()=>{history.go(-t)},type:"popstate",delta:t})}}),addEventListener("hashchange",()=>{F&&(F=!1,history.replaceState({...history.state,[N]:++A},"",location.href))});for(const e of document.querySelectorAll("link"))e.rel==="icon"&&(e.href=e.href);addEventListener("pageshow",e=>{e.persisted&&M.navigating.set(null)})},_hydrate:async({status:e=200,error:a,node_ids:t,params:r,route:s,data:l,form:u})=>{I=!0;const y=new URL(location.href);({params:r={},route:s={id:null}}=W(y,!1)||{});let w;try{const m=t.map(async(E,f)=>{const P=l[f];return P?.uses&&(P.uses=Ve(P.uses)),de({loader:n.nodes[E],url:y,params:r,route:s,parent:async()=>{const q={};for(let O=0;O<f;O+=1)Object.assign(q,(await m[O]).data);return q},server_data_node:pe(P)})}),x=await Promise.all(m),d=c.find(({id:E})=>E===s.id);if(d){const E=d.layouts;for(let f=0;f<E.length;f++)E[f]||x.splice(f,0,void 0)}w=await G({url:y,params:r,branch:x,status:e,error:a,form:u,route:d??null})}catch(m){if(m instanceof qe){await B(new URL(m.location,location.href));return}w=await oe({status:m instanceof Z?m.status:500,error:await Y(m,{url:y,params:r,route:s}),url:y,route:s})}Pe(w)}}}async function He(n,o){const c=new URL(n);c.pathname=nt(n.pathname),c.searchParams.append(mt,o.map(_=>_?"1":"0").join(""));const i=await fe(c.href);if(!i.ok)throw new Z(i.status,await i.json());return new Promise(async _=>{const h=new Map,b=i.body.getReader(),g=new TextDecoder;function S(p){return Ge(p,{Promise:I=>new Promise((U,k)=>{h.set(I,{fulfil:U,reject:k})})})}let v="";for(;;){const{done:p,value:I}=await b.read();if(p&&!v)break;for(v+=!I&&v?`
`:g.decode(I);;){const U=v.indexOf(`
`);if(U===-1)break;const k=JSON.parse(v.slice(0,U));if(v=v.slice(U+1),k.type==="redirect")return _(k);if(k.type==="data")k.nodes?.forEach(L=>{L?.type==="data"&&(L.uses=Ve(L.uses),L.data=S(L.data))}),_(k);else if(k.type==="chunk"){const{id:L,data:j,error:F}=k,J=h.get(L);h.delete(L),F?J.reject(S(F)):J.fulfil(S(j))}}}})}function Ve(n){return{dependencies:new Set(n?.dependencies??[]),params:new Set(n?.params??[]),parent:!!n?.parent,route:!!n?.route,url:!!n?.url}}function Se(){const n=document.querySelector("[autofocus]");if(n)n.focus();else{const o=document.body,c=o.getAttribute("tabindex");o.tabIndex=-1,o.focus({preventScroll:!0,focusVisible:!1}),c!==null?o.setAttribute("tabindex",c):o.removeAttribute("tabindex");const i=getSelection();if(i&&i.type!=="None"){const _=[];for(let h=0;h<i.rangeCount;h+=1)_.push(i.getRangeAt(h));setTimeout(()=>{if(i.rangeCount===_.length){for(let h=0;h<i.rangeCount;h+=1){const b=_[h],g=i.getRangeAt(h);if(b.commonAncestorContainer!==g.commonAncestorContainer||b.startContainer!==g.startContainer||b.endContainer!==g.endContainer||b.startOffset!==g.startOffset||b.endOffset!==g.endOffset)return}i.removeAllRanges()}})}}}async function Et(n,o,c){const i=_t(n,o);Be({client:i}),c?await i._hydrate(c):i.goto(location.href,{replaceState:!0}),i._start_router()}export{Et as start};
