import{S as we,i as Ee,s as Pe,E as q,U as Le,V as Ie,m as v,h as d,a1 as j,b as O,G as ke,D as re,X as ye,a5 as se,a0 as Ue,k as _,q as R,a as z,y as ne,l as p,r as T,c as A,z as ie,n as c,W as oe,F as f,A as ce,O as ze,Z as Ae,g as ue,d as fe,B as de,Q as Be,e as he,u as Ne}from"../chunks/index.2c758050.js";import{e as Me,a as Se,i as De}from"../chunks/forms.2ead3416.js";import{I as Oe}from"../chunks/Input.ffd93c2c.js";import{t as Ve}from"../chunks/toast.a0f922fa.js";import"../chunks/functions.31e05279.js";import{g as me}from"../chunks/utils.9d64f4e6.js";const Ce={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"}]}};function _e(i,t,l){const a=i.slice();return a[6]=t[l],a}function pe(i){let t,l=[i[6]],a={};for(let r=0;r<l.length;r+=1)a=q(a,l[r]);return{c(){t=Le("path"),this.h()},l(r){t=Ie(r,"path",{}),v(t).forEach(d),this.h()},h(){j(t,a)},m(r,o){O(r,t,o)},p(r,o){j(t,a=ke(l,[o&2&&r[6]]))},d(r){r&&d(t)}}}function Re(i){let t,l=i[1]?.path??[],a=[];for(let e=0;e<l.length;e+=1)a[e]=pe(_e(i,l,e));let r=[i[1]?.a,{xmlns:"http://www.w3.org/2000/svg"},{width:i[0]},{height:i[0]},{"aria-hidden":"true"},i[2]],o={};for(let e=0;e<r.length;e+=1)o=q(o,r[e]);return{c(){t=Le("svg");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=Ie(e,"svg",{xmlns:!0,width:!0,height:!0,"aria-hidden":!0});var n=v(t);for(let s=0;s<a.length;s+=1)a[s].l(n);n.forEach(d),this.h()},h(){j(t,o)},m(e,n){O(e,t,n);for(let s=0;s<a.length;s+=1)a[s].m(t,null)},p(e,[n]){if(n&2){l=e[1]?.path??[];let s;for(s=0;s<l.length;s+=1){const E=_e(e,l,s);a[s]?a[s].p(E,n):(a[s]=pe(E),a[s].c(),a[s].m(t,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=l.length}j(t,o=ke(r,[n&2&&e[1]?.a,{xmlns:"http://www.w3.org/2000/svg"},n&1&&{width:e[0]},n&1&&{height:e[0]},{"aria-hidden":"true"},n&4&&e[2]]))},i:re,o:re,d(e){e&&d(t),ye(a,e)}}}function Te(i,t,l){let a;const r=["src","size","solid","mini"];let o=se(t,r),{src:e}=t,{size:n="100%"}=t,{solid:s=!1}=t,{mini:E=!1}=t;if(n!=="100%"&&n.slice(-1)!="x"&&n.slice(-1)!="m"&&n.slice(-1)!="%")try{n=parseInt(n)+"px"}catch{n="100%"}return i.$$set=h=>{t=q(q({},t),Ue(h)),l(2,o=se(t,r)),"src"in h&&l(3,e=h.src),"size"in h&&l(0,n=h.size),"solid"in h&&l(4,s=h.solid),"mini"in h&&l(5,E=h.mini)},i.$$.update=()=>{i.$$.dirty&56&&l(1,a=e?.[s?"solid":E?"mini":"default"])},[n,a,o,e,s,E]}class qe extends we{constructor(t){super(),Ee(this,t,Te,Re,Pe,{src:3,size:0,solid:4,mini:5})}}function ve(i,t,l){const a=i.slice();return a[5]=t[l],a}function ge(i){let t,l=i[1]?.errors?.avatar,a=[];for(let r=0;r<l.length;r+=1)a[r]=be(ve(i,l,r));return{c(){for(let r=0;r<a.length;r+=1)a[r].c();t=he()},l(r){for(let o=0;o<a.length;o+=1)a[o].l(r);t=he()},m(r,o){for(let e=0;e<a.length;e+=1)a[e].m(r,o);O(r,t,o)},p(r,o){if(o&2){l=r[1]?.errors?.avatar;let e;for(e=0;e<l.length;e+=1){const n=ve(r,l,e);a[e]?a[e].p(n,o):(a[e]=be(n),a[e].c(),a[e].m(t.parentNode,t))}for(;e<a.length;e+=1)a[e].d(1);a.length=l.length}},d(r){ye(a,r),r&&d(t)}}}function be(i){let t,l,a=i[5]+"",r,o;return{c(){t=_("label"),l=_("span"),r=R(a),o=z(),this.h()},l(e){t=p(e,"LABEL",{for:!0,class:!0});var n=v(t);l=p(n,"SPAN",{class:!0});var s=v(l);r=T(s,a),s.forEach(d),o=A(n),n.forEach(d),this.h()},h(){c(l,"class","label-text-alt text-error"),c(t,"for","avatar"),c(t,"class","label py-0 pt-1")},m(e,n){O(e,t,n),f(t,l),f(l,r),f(t,o)},p(e,n){n&2&&a!==(a=e[5]+"")&&Ne(r,a)},d(e){e&&d(t)}}}function je(i){let t,l,a,r,o,e,n,s,E,h,P,L,M,B,F,S,I,V,G,b,H,Q,y,W,D,k,X,N,Z,J;B=new qe({props:{src:Ce,class:"w-4 h-4"}});let m=i[1]?.errors?.avatar&&ge(i);return y=new Oe({props:{id:"name",label:"Name",value:i[1]?.data?.name??i[0]?.user?.name,disabled:i[2],errors:i[1]?.errors?.name}}),{c(){t=_("div"),l=_("form"),a=_("h3"),r=R("Update Profile"),o=z(),e=_("div"),n=_("label"),s=_("span"),E=R("Profile Picture"),h=z(),P=_("label"),L=_("label"),M=_("span"),ne(B.$$.fragment),F=z(),S=_("div"),I=_("img"),G=z(),b=_("input"),H=z(),m&&m.c(),Q=z(),ne(y.$$.fragment),W=z(),D=_("div"),k=_("button"),X=R("Update Profile"),this.h()},l(u){t=p(u,"DIV",{class:!0});var w=v(t);l=p(w,"FORM",{action:!0,method:!0,class:!0,enctype:!0});var g=v(l);a=p(g,"H3",{class:!0});var K=v(a);r=T(K,"Update Profile"),K.forEach(d),o=A(g),e=p(g,"DIV",{class:!0});var U=v(e);n=p(U,"LABEL",{for:!0,class:!0});var Y=v(n);s=p(Y,"SPAN",{class:!0});var x=v(s);E=T(x,"Profile Picture"),x.forEach(d),Y.forEach(d),h=A(U),P=p(U,"LABEL",{for:!0,class:!0});var C=v(P);L=p(C,"LABEL",{for:!0,class:!0});var $=v(L);M=p($,"SPAN",{class:!0});var ee=v(M);ie(B.$$.fragment,ee),ee.forEach(d),$.forEach(d),F=A(C),S=p(C,"DIV",{class:!0});var ae=v(S);I=p(ae,"IMG",{src:!0,alt:!0,id:!0}),ae.forEach(d),C.forEach(d),G=A(U),b=p(U,"INPUT",{type:!0,name:!0,id:!0,accept:!0}),H=A(U),m&&m.l(U),U.forEach(d),Q=A(g),ie(y.$$.fragment,g),W=A(g),D=p(g,"DIV",{class:!0});var te=v(D);k=p(te,"BUTTON",{class:!0,type:!0});var le=v(k);X=T(le,"Update Profile"),le.forEach(d),te.forEach(d),g.forEach(d),w.forEach(d),this.h()},h(){c(a,"class","text-2xl font-medium"),c(s,"class","label-text"),c(n,"for","avatar"),c(n,"class","label font-medium pb-1"),c(M,"class","btn btn-circle btn-sm btn-secondary"),c(L,"for","avatar"),c(L,"class","absolute -bottom-0.5 -right-0.5 hover:cursor-pointer"),oe(I.src,V=i[0].user?.avatar?me(i[0].user?.collectionId,i[0].user?.id,i[0].user?.avatar):`https://ui-avatars.com/api/?name=${i[0].user?.name}`)||c(I,"src",V),c(I,"alt","user avatar"),c(I,"id","avatar-preview"),c(S,"class","w-32 rounded-full"),c(P,"for","avatar"),c(P,"class","avatar w-32 rounded-full hover:cursor-pointer"),c(b,"type","file"),c(b,"name","avatar"),c(b,"id","avatar"),b.value="",c(b,"accept","image/*"),b.hidden=!0,b.disabled=i[2],c(e,"class","form-control w-full max-w-lg"),c(k,"class","btn btn-primary w-full max-w-lg"),c(k,"type","submit"),k.disabled=i[2],c(D,"class","w-full max-w-lg pt-3"),c(l,"action","?/updateProfile"),c(l,"method","POST"),c(l,"class","flex flex-col space-y-2 w-full"),c(l,"enctype","multipart/form-data"),c(t,"class","flex flex-col w-full h-full")},m(u,w){O(u,t,w),f(t,l),f(l,a),f(a,r),f(l,o),f(l,e),f(e,n),f(n,s),f(s,E),f(e,h),f(e,P),f(P,L),f(L,M),ce(B,M,null),f(P,F),f(P,S),f(S,I),f(e,G),f(e,b),f(e,H),m&&m.m(e,null),f(l,Q),ce(y,l,null),f(l,W),f(l,D),f(D,k),f(k,X),N=!0,Z||(J=[ze(b,"change",i[3]),Ae(Me.call(null,l,i[4]))],Z=!0)},p(u,[w]){(!N||w&1&&!oe(I.src,V=u[0].user?.avatar?me(u[0].user?.collectionId,u[0].user?.id,u[0].user?.avatar):`https://ui-avatars.com/api/?name=${u[0].user?.name}`))&&c(I,"src",V),(!N||w&4)&&(b.disabled=u[2]),u[1]?.errors?.avatar?m?m.p(u,w):(m=ge(u),m.c(),m.m(e,null)):m&&(m.d(1),m=null);const g={};w&3&&(g.value=u[1]?.data?.name??u[0]?.user?.name),w&4&&(g.disabled=u[2]),w&2&&(g.errors=u[1]?.errors?.name),y.$set(g),(!N||w&4)&&(k.disabled=u[2])},i(u){N||(ue(B.$$.fragment,u),ue(y.$$.fragment,u),N=!0)},o(u){fe(B.$$.fragment,u),fe(y.$$.fragment,u),N=!1},d(u){u&&d(t),de(B),m&&m.d(),de(y),Z=!1,Be(J)}}}function Fe(i,t,l){let{data:a}=t,{form:r}=t,o;const e=s=>{const h=s.target.files;if(h.length>0){const P=URL.createObjectURL(h[0]),L=document.getElementById("avatar-preview");L.src=P}},n=()=>(l(2,o=!0),async({result:s})=>{switch(s.type){case"success":Ve.success("Profile updated"),await De();break;case"error":break;default:await Se(s)}l(2,o=!1)});return i.$$set=s=>{"data"in s&&l(0,a=s.data),"form"in s&&l(1,r=s.form)},l(2,o=!1),[a,r,o,e,n]}class Je extends we{constructor(t){super(),Ee(this,t,Fe,je,Pe,{data:0,form:1})}}export{Je as default};
