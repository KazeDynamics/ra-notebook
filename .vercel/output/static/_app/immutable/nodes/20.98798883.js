import{S as we,i as Ee,s as Pe,J as j,E as Le,F as Ie,b as v,f as d,N as q,h as C,M as ke,n as re,w as ye,Z as se,K as ze,e as _,t as R,a as A,x as ne,c as p,d as T,g as B,y as ie,o as c,_ as oe,j as f,z as ce,V as Ae,A as Be,r as ue,v as fe,B as de,Q as Ue,G as he,k as Ne}from"../chunks/index.12c65bb6.js";import{e as Me,a as Se,i as Ve}from"../chunks/forms.f29cd588.js";import{I as Ce}from"../chunks/Input.159a4e01.js";import{t as De}from"../chunks/toast.28380f4f.js";import"../chunks/functions.93e96281.js";import{g as me}from"../chunks/utils.9d64f4e6.js";const Oe={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"}]}};function _e(i,a,l){const t=i.slice();return t[6]=a[l],t}function pe(i){let a,l=[i[6]],t={};for(let r=0;r<l.length;r+=1)t=j(t,l[r]);return{c(){a=Le("path"),this.h()},l(r){a=Ie(r,"path",{}),v(a).forEach(d),this.h()},h(){q(a,t)},m(r,o){C(r,a,o)},p(r,o){q(a,t=ke(l,[o&2&&r[6]]))},d(r){r&&d(a)}}}function Re(i){let a,l=i[1]?.path??[],t=[];for(let e=0;e<l.length;e+=1)t[e]=pe(_e(i,l,e));let r=[i[1]?.a,{xmlns:"http://www.w3.org/2000/svg"},{width:i[0]},{height:i[0]},{"aria-hidden":"true"},i[2]],o={};for(let e=0;e<r.length;e+=1)o=j(o,r[e]);return{c(){a=Le("svg");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){a=Ie(e,"svg",{xmlns:!0,width:!0,height:!0,"aria-hidden":!0});var n=v(a);for(let s=0;s<t.length;s+=1)t[s].l(n);n.forEach(d),this.h()},h(){q(a,o)},m(e,n){C(e,a,n);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(a,null)},p(e,[n]){if(n&2){l=e[1]?.path??[];let s;for(s=0;s<l.length;s+=1){const E=_e(e,l,s);t[s]?t[s].p(E,n):(t[s]=pe(E),t[s].c(),t[s].m(a,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}q(a,o=ke(r,[n&2&&e[1]?.a,{xmlns:"http://www.w3.org/2000/svg"},n&1&&{width:e[0]},n&1&&{height:e[0]},{"aria-hidden":"true"},n&4&&e[2]]))},i:re,o:re,d(e){e&&d(a),ye(t,e)}}}function Te(i,a,l){let t;const r=["src","size","solid","mini"];let o=se(a,r),{src:e}=a,{size:n="100%"}=a,{solid:s=!1}=a,{mini:E=!1}=a;if(n!=="100%"&&n.slice(-1)!="x"&&n.slice(-1)!="m"&&n.slice(-1)!="%")try{n=parseInt(n)+"px"}catch{n="100%"}return i.$$set=h=>{a=j(j({},a),ze(h)),l(2,o=se(a,r)),"src"in h&&l(3,e=h.src),"size"in h&&l(0,n=h.size),"solid"in h&&l(4,s=h.solid),"mini"in h&&l(5,E=h.mini)},i.$$.update=()=>{i.$$.dirty&56&&l(1,t=e?.[s?"solid":E?"mini":"default"])},[n,t,o,e,s,E]}class je extends we{constructor(a){super(),Ee(this,a,Te,Re,Pe,{src:3,size:0,solid:4,mini:5})}}function ve(i,a,l){const t=i.slice();return t[5]=a[l],t}function ge(i){let a,l=i[1]?.errors?.avatar,t=[];for(let r=0;r<l.length;r+=1)t[r]=be(ve(i,l,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();a=he()},l(r){for(let o=0;o<t.length;o+=1)t[o].l(r);a=he()},m(r,o){for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(r,o);C(r,a,o)},p(r,o){if(o&2){l=r[1]?.errors?.avatar;let e;for(e=0;e<l.length;e+=1){const n=ve(r,l,e);t[e]?t[e].p(n,o):(t[e]=be(n),t[e].c(),t[e].m(a.parentNode,a))}for(;e<t.length;e+=1)t[e].d(1);t.length=l.length}},d(r){ye(t,r),r&&d(a)}}}function be(i){let a,l,t=i[5]+"",r,o;return{c(){a=_("label"),l=_("span"),r=R(t),o=A(),this.h()},l(e){a=p(e,"LABEL",{for:!0,class:!0});var n=v(a);l=p(n,"SPAN",{class:!0});var s=v(l);r=T(s,t),s.forEach(d),o=B(n),n.forEach(d),this.h()},h(){c(l,"class","label-text-alt text-error"),c(a,"for","avatar"),c(a,"class","label py-0 pt-1")},m(e,n){C(e,a,n),f(a,l),f(l,r),f(a,o)},p(e,n){n&2&&t!==(t=e[5]+"")&&Ne(r,t)},d(e){e&&d(a)}}}function qe(i){let a,l,t,r,o,e,n,s,E,h,P,L,M,U,F,S,I,D,G,b,H,J,y,K,V,k,Q,N,Z,W;U=new je({props:{src:Oe,class:"w-4 h-4"}});let m=i[1]?.errors?.avatar&&ge(i);return y=new Ce({props:{id:"name",label:"Name",value:i[1]?.data?.name??i[0]?.user?.name,disabled:i[2],errors:i[1]?.errors?.name}}),{c(){a=_("div"),l=_("form"),t=_("h3"),r=R("Update Profile"),o=A(),e=_("div"),n=_("label"),s=_("span"),E=R("Profile Picture"),h=A(),P=_("label"),L=_("label"),M=_("span"),ne(U.$$.fragment),F=A(),S=_("div"),I=_("img"),G=A(),b=_("input"),H=A(),m&&m.c(),J=A(),ne(y.$$.fragment),K=A(),V=_("div"),k=_("button"),Q=R("Update Profile"),this.h()},l(u){a=p(u,"DIV",{class:!0});var w=v(a);l=p(w,"FORM",{action:!0,method:!0,class:!0,enctype:!0});var g=v(l);t=p(g,"H3",{class:!0});var X=v(t);r=T(X,"Update Profile"),X.forEach(d),o=B(g),e=p(g,"DIV",{class:!0});var z=v(e);n=p(z,"LABEL",{for:!0,class:!0});var Y=v(n);s=p(Y,"SPAN",{class:!0});var x=v(s);E=T(x,"Profile Picture"),x.forEach(d),Y.forEach(d),h=B(z),P=p(z,"LABEL",{for:!0,class:!0});var O=v(P);L=p(O,"LABEL",{for:!0,class:!0});var $=v(L);M=p($,"SPAN",{class:!0});var ee=v(M);ie(U.$$.fragment,ee),ee.forEach(d),$.forEach(d),F=B(O),S=p(O,"DIV",{class:!0});var te=v(S);I=p(te,"IMG",{src:!0,alt:!0,id:!0}),te.forEach(d),O.forEach(d),G=B(z),b=p(z,"INPUT",{type:!0,name:!0,id:!0,accept:!0}),H=B(z),m&&m.l(z),z.forEach(d),J=B(g),ie(y.$$.fragment,g),K=B(g),V=p(g,"DIV",{class:!0});var ae=v(V);k=p(ae,"BUTTON",{class:!0,type:!0});var le=v(k);Q=T(le,"Update Profile"),le.forEach(d),ae.forEach(d),g.forEach(d),w.forEach(d),this.h()},h(){c(t,"class","text-2xl font-medium"),c(s,"class","label-text"),c(n,"for","avatar"),c(n,"class","label font-medium pb-1"),c(M,"class","btn btn-circle btn-sm btn-secondary"),c(L,"for","avatar"),c(L,"class","absolute -bottom-0.5 -right-0.5 hover:cursor-pointer"),oe(I.src,D=i[0].user?.avatar?me(i[0].user?.collectionId,i[0].user?.id,i[0].user?.avatar):`https://ui-avatars.com/api/?name=${i[0].user?.name}`)||c(I,"src",D),c(I,"alt","user avatar"),c(I,"id","avatar-preview"),c(S,"class","w-32 rounded-full"),c(P,"for","avatar"),c(P,"class","avatar w-32 rounded-full hover:cursor-pointer"),c(b,"type","file"),c(b,"name","avatar"),c(b,"id","avatar"),b.value="",c(b,"accept","image/*"),b.hidden=!0,b.disabled=i[2],c(e,"class","form-control w-full max-w-lg"),c(k,"class","btn btn-primary w-full max-w-lg"),c(k,"type","submit"),k.disabled=i[2],c(V,"class","w-full max-w-lg pt-3"),c(l,"action","?/updateProfile"),c(l,"method","POST"),c(l,"class","flex flex-col space-y-2 w-full"),c(l,"enctype","multipart/form-data"),c(a,"class","flex flex-col w-full h-full")},m(u,w){C(u,a,w),f(a,l),f(l,t),f(t,r),f(l,o),f(l,e),f(e,n),f(n,s),f(s,E),f(e,h),f(e,P),f(P,L),f(L,M),ce(U,M,null),f(P,F),f(P,S),f(S,I),f(e,G),f(e,b),f(e,H),m&&m.m(e,null),f(l,J),ce(y,l,null),f(l,K),f(l,V),f(V,k),f(k,Q),N=!0,Z||(W=[Ae(b,"change",i[3]),Be(Me.call(null,l,i[4]))],Z=!0)},p(u,[w]){(!N||w&1&&!oe(I.src,D=u[0].user?.avatar?me(u[0].user?.collectionId,u[0].user?.id,u[0].user?.avatar):`https://ui-avatars.com/api/?name=${u[0].user?.name}`))&&c(I,"src",D),(!N||w&4)&&(b.disabled=u[2]),u[1]?.errors?.avatar?m?m.p(u,w):(m=ge(u),m.c(),m.m(e,null)):m&&(m.d(1),m=null);const g={};w&3&&(g.value=u[1]?.data?.name??u[0]?.user?.name),w&4&&(g.disabled=u[2]),w&2&&(g.errors=u[1]?.errors?.name),y.$set(g),(!N||w&4)&&(k.disabled=u[2])},i(u){N||(ue(U.$$.fragment,u),ue(y.$$.fragment,u),N=!0)},o(u){fe(U.$$.fragment,u),fe(y.$$.fragment,u),N=!1},d(u){u&&d(a),de(U),m&&m.d(),de(y),Z=!1,Ue(W)}}}function Fe(i,a,l){let{data:t}=a,{form:r}=a,o;const e=s=>{const h=s.target.files;if(h.length>0){const P=URL.createObjectURL(h[0]),L=document.getElementById("avatar-preview");L.src=P}},n=()=>(l(2,o=!0),async({result:s})=>{switch(s.type){case"success":De.success("Profile updated"),await Ve();break;case"error":break;default:await Se(s)}l(2,o=!1)});return i.$$set=s=>{"data"in s&&l(0,t=s.data),"form"in s&&l(1,r=s.form)},l(2,o=!1),[t,r,o,e,n]}class We extends we{constructor(a){super(),Ee(this,a,Fe,qe,Pe,{data:0,form:1})}}export{We as component};
